{"version":3,"file":"requests.js","sourceRoot":"","sources":["../src/utils/requests.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,WAAW,GAAG,IAAI,GAAG,EAAkB,CAAC;AACrD,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAwB,CAAC;AAEjD,MAAM,UAAU,aAAa,CAAC,GAAW;IACvC,gDAAgD;IAChD,IAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAEhC,IAAI,CAAC,OAAO,EAAE;QACZ,kCAAkC;QAClC,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YACnC,IAAI,QAAQ,CAAC,EAAE,EAAE;gBACf,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;oBACvC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;oBACjC,OAAO,UAAU,CAAC;gBACpB,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;gBACzB,OAAO,SAAS,CAAC;aAClB;QACH,CAAC,CAAC,CAAC;QAEH,8BAA8B;QAC9B,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;KAC5B;IAED,OAAO,OAAO,CAAC;AACjB,CAAC","sourcesContent":["export const iconContent = new Map<string, string>();\r\nconst requests = new Map<string, Promise<any>>();\r\n\r\nexport function getSvgContent(url: string) {\r\n  // see if we already have a request for this url\r\n  let request = requests.get(url);\r\n\r\n  if (!request) {\r\n    // we don't already have a request\r\n    request = fetch(url).then(response => {\r\n      if (response.ok) {\r\n        return response.text().then(svgContent => {\r\n          iconContent.set(url, svgContent);\r\n          return svgContent;\r\n        });\r\n      } else {\r\n        iconContent.set(url, \"\");\r\n        return undefined;\r\n      }\r\n    });\r\n\r\n    // cache for the same requests\r\n    requests.set(url, request);\r\n  }\r\n\r\n  return request;\r\n}\r\n"]}